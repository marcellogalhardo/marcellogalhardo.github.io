<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Marcello Galhardo</title>
<meta name=keywords content><meta name=description content="Posts - Marcello Galhardo"><meta name=author content><link rel=canonical href=https://marcellogalhardo.dev/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://marcellogalhardo.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://marcellogalhardo.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://marcellogalhardo.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://marcellogalhardo.dev/apple-touch-icon.png><link rel=mask-icon href=https://marcellogalhardo.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://marcellogalhardo.dev/posts/index.xml><link rel=alternate hreflang=en href=https://marcellogalhardo.dev/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-7LK7ENB813"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7LK7ENB813",{anonymize_ip:!1})}</script><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://marcellogalhardo.dev/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://marcellogalhardo.dev/posts/"}]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://marcellogalhardo.dev/ accesskey=h title="Marcello Galhardo (Alt + H)">Marcello Galhardo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://marcellogalhardo.dev/posts/ title=Posts><span class=active>Posts</span></a></li><li><a href=https://marcellogalhardo.dev/talks title=Talks><span>Talks</span></a></li><li><a href=https://marcellogalhardo.dev/about title=About><span>About</span></a></li><li><a href=https://marcellogalhardo.dev/uses title=Uses><span>Uses</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Function Properties in Data Classes are Code Smells</h2></header><div class=entry-content><p>To me, using functions as properties in the primary constructor of a data class is a code smell. Here’s why:
Data classes represent data. Data is a value. Data is never executed. Functions are not data. They produce values when executed. A function returns a value. A procedure runs a command. In either case, these are behaviors, not data.
Why It Matters Kotlin generates key methods for data classes based on the properties in the primary constructor, such as:...</p></div><footer class=entry-footer><span title='2024-11-29 16:09:00 +0100 +0100'>November 29, 2024</span></footer><a class=entry-link aria-label="post link to Function Properties in Data Classes are Code Smells" href=https://marcellogalhardo.dev/posts/function-properties-in-data-classes-are-code-smells/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Robolectric in commonTest</h2></header><div class=entry-content><p>Sharing tests across Kotlin Multiplatform (KMP) projects can be tricky when dealing with platform-specific APIs like Android’s Bundle. commonTest on Android relies on the androidTest source set, which uses an empty android.jar, leading to test failures.
The Solution The ideal solution is to avoid platform-specific APIs in commonTest.
If that’s not an option, you can use Robolectric in your commonTest source set to access functional Android classes. This approach:
Allows testing of platform-specific code in commonTest....</p></div><footer class=entry-footer><span title='2024-11-28 16:15:00 +0100 +0100'>November 28, 2024</span></footer><a class=entry-link aria-label="post link to Robolectric in commonTest" href=https://marcellogalhardo.dev/posts/robolectric-in-common-test/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Extension Shadowing for Actual Declarations in KMP</h2></header><div class=entry-content><p>Heads-up: this article assumes familiarity with Kotlin’s extension functions and expect and actual declarations in Kotlin Multiplatform (KMP).
My work has recently focused on “commonizing”1 APIs, and I came across KT-70012, which I believe merits attention.
In Kotlin JVM development, the EXTENSION_SHADOWED_BY_MEMBER warning indicates that an extension function is redundant, as it will always be overshadowed by a member function with the same name when invoked. However, in KMP, this behaviour can be useful, as shadowing may occur on some platforms but not all....</p></div><footer class=entry-footer><span title='2024-11-07 15:49:00 +0100 +0100'>November 7, 2024</span></footer><a class=entry-link aria-label="post link to Extension Shadowing for Actual Declarations in KMP" href=https://marcellogalhardo.dev/posts/extension-shadowing-for-actual-declarations-in-kmp/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>No Mocks Allowed</h2></header><div class=entry-content><p>Disclaimer: It has been brought to my attention the title can be seen as a click bait. That wasn’t my intention and I’m sorry. I wanted to reference the Fallout game series and the No Mutants Allowed community.
Testable code plays a crucial role in app development. When we neglect designing code for testability, we often resort to using a mock library (such as Mockito Kotlin, also know as “auto-mockers”) as a mean to achieve test coverage....</p></div><footer class=entry-footer><span title='2023-06-28 18:34:00 +0100 +0100'>June 28, 2023</span></footer><a class=entry-link aria-label="post link to No Mocks Allowed" href=https://marcellogalhardo.dev/posts/no-mocks-allowed/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Injection Points</h2></header><div class=entry-content><p>Android has made significant progress in becoming a DI-Friendly Framework. Throughout the years, new APIs like AppComponentFactory and FragmentFactory have been introduced, allowing apps to incorporate their own custom constructors and facilitating the development of testable code.
The purpose of this article is to highlight some of the Android APIs that are utilised behind the scenes. By exploring these APIs, developers can gain a better understanding of the underlying mechanisms employed by popular libraries (such as Dagger Hilt and Koin Android)....</p></div><footer class=entry-footer><span title='2023-06-02 09:12:00 +0100 +0100'>June 2, 2023</span></footer><a class=entry-link aria-label="post link to Injection Points" href=https://marcellogalhardo.dev/posts/injection-points/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Namespace for Extension Functions</h2></header><div class=entry-content><p>A few weeks ago, I had to create an extension function - a usual task for any Kotlin developer. But there were a few limitations:
The receiver was a common type, polluted with too many methods. The extension function was only relevant to my feature package. Creating a Gradle module was out of scope. Introducing a new type to hold the function felt like too much. Kotlin doesn’t support package-private, yet....</p></div><footer class=entry-footer><span title='2023-03-25 09:02:50 +0100 +0100'>March 25, 2023</span></footer><a class=entry-link aria-label="post link to Namespace for Extension Functions" href=https://marcellogalhardo.dev/posts/2023/namespace-for-extension-functions/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Trampoline Activities</h2></header><div class=entry-content><p>Today, I came across the term “Trampoline Activities”. Although it’s not an official name (or is it?), I’ve noticed it is a typical pattern and have decided to make a “How To” guide.
What are Trampoline Activities? A Trampoline Activity is an Activity that launches another activity and finishes itself. It may include conditional logic to determine which activity to launch or transforming the parameters before sending it to the next Activity....</p></div><footer class=entry-footer><span title='2023-03-06 09:02:50 +0100 +0100'>March 6, 2023</span></footer><a class=entry-link aria-label="post link to Trampoline Activities" href=https://marcellogalhardo.dev/posts/2023/trampoline-activities/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Deep Models</h2></header><div class=entry-content><p>Modeling is a critical task in Software Development: good models reduce the risk of bugs, increase readability and improve maintainability. However, we can often see developers focusing on “How can I code this?”, and they are done with their task when they find a way to code it. This inherently reduces the domain modeling to the abuse of primitives and shallow design where any inconsistent state is allowed.
To better explain, let’s consider the hypothetical requirements:...</p></div><footer class=entry-footer><span title='2021-10-07 09:02:50 +0100 +0100'>October 7, 2021</span></footer><a class=entry-link aria-label="post link to Deep Models" href=https://marcellogalhardo.dev/posts/2021/10/07/deep-models/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Using Compose Beta on AS 4.1</h2></header><div class=entry-content><p>Jetpack Compose hit Beta! Many teams are excited to experiment with Compose, but as you might know, since 1.0.0-alpha04, the compiler has been refactored to a new group and became incompatible with the current Android Studio (AS) 4.1 stable:
Compose Version 1.0.0-alpha04 is only compatible with Android Studio 4.2 Canary 13 and later.
Been forced to use a Canary version of AS is a real bummer. There are cases in which you want to explore Compose in a real-world application (e....</p></div><footer class=entry-footer><span title='2021-03-30 17:37:41 +0200 +0200'>March 30, 2021</span></footer><a class=entry-link aria-label="post link to Using Compose Beta on AS 4.1" href=https://marcellogalhardo.dev/posts/2021/03/30/using-compose-beta-on-as-4-1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>N26 Path to Anvil</h2></header><div class=entry-content><p>This post represents my personal experience while working at N26. I do not speak for the company nor by other employees.
N26 Android App current codebase has a million lines of code, 280+ modules, and 30+ engineers working in 4 different countries and different timezones in a mono repository. Our modules are divided into features and libraries, and we have been using “Sample Apps” for years now as our full app build time might take up to 20 minutes....</p></div><footer class=entry-footer><span title='2021-02-05 09:02:50 +0100 +0100'>February 5, 2021</span></footer><a class=entry-link aria-label="post link to N26 Path to Anvil" href=https://marcellogalhardo.dev/posts/2021/02/05/n26-path-to-anvil/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://marcellogalhardo.dev/posts/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>CC BY-NC 4.0</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>